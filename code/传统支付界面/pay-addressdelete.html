<!DOCTYPE html>
<html lang="en" class="pay-confirm">
<head>
    <meta charset="UTF-8">
    <title>16-2地址删除</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="stylesheet" href="css/reset.css"/>
    <link rel="stylesheet" href="css/pay-confirm.css"/>
</head>
<body>
<form action="" id="form2">
    <section class="line"></section>
    <section class="address-confirm flex">
        <div class="box1 flex ac">
            <input type="checkbox" id="checkbox1" class="option"><label for="checkbox1"></label>
        </div>
        <div class="box2">
            <p class="flex sb">昵称昵称昵称 <span>158******065</span></p>
            <p>新疆省呼和浩特市九龙坡区杨家坪万象城华润大厦B座11-2</p>
            <p class="flex sb extra ac">
                <span class="flex ac"><input type="checkbox" id="checkbox3"><label for="checkbox3"></label><em>设为默认</em></span>
                <a href="javascript:;">删除</a>
            </p>
        </div>
    </section>
    <section class="address-confirm flex">
        <div class="box1 flex ac">
            <input type="checkbox" id="checkbox2" class="option"><label for="checkbox2"></label>
        </div>
        <div class="box2">
            <p class="flex sb">昵称昵称昵称 <span>158******065</span></p>
            <p>新疆省呼和浩特市九龙坡区杨家坪万象城华润大厦B座11-2</p>
            <p class="flex sb extra ac">
                <span class="flex ac"><input type="checkbox" id="checkbox4"><label for="checkbox4"></label><em>设为默认</em></span>
                <a href="javascript:;">删除</a>
            </p>
        </div>
    </section>
    <section class="dis30"></section>
    <a class="add-address"  id="add-address">添加新地址</a>
    <!--<section class="dis670"></section>-->

    <section class="last">
        <footer class="addressdelete">
            <input type="button" value="删除" id="delete">
        </footer>
    </section>
</form>
<!--模态框-->
<section class="modal-wrap2" id="modal-wrap2">

</section>
<section class="wrap2" id="wrap2">
    <p>提示</p>
    <p>确认删除这条回复?</p>
    <div class="btn"><input type="button" value="确定" id="btn-confirm"><input type="button" value="取消" id="btn-cancel"></div>
</section>

<!--提示框-->
<section class="alertbox"></section>
</body>
</html>
<script src="js/mediaquery2.js"></script>
<script src="js/zepto.min.js"></script>
<script>
    $(function(){
        //警告框函数
        function showalertbox(){
            $('.alertbox').show(1000);
            $('.alertbox').css("-webkit-transform",'translateX(-50%)');
            $('.alertbox').css("transform",'translateX(-50%)');
        }

        var form2 = document.getElementById('form2');
        var form_offsetHeight = form2.offsetHeight;
        var windowHeight = window.innerHeight;
        var isempty =false;

        //点击删除
        $('#delete').on('touchend',function(e){
            e.stopPropagation();
            $('.option:checked').each(function(){
                isempty = $(this);
            });
            if(!isempty){
                showalertbox();
                $('.alertbox').html('请选择需要删除的商品');
                setTimeout(function(){
                    $('.alertbox').hide(1000);
                },2000);
                return;
            }
            else{
                $('.modal-wrap2').css("display","block");
                $('.wrap2').css("display","block");
                if(form_offsetHeight > windowHeight){
                    $('.modal-wrap2').css("height",form_offsetHeight+"px")
                }
                isempty = false;
            }
        });

        //消除模态框
        $(document).on('touchend',function(e){
            //e.preventDefault();
            e.stopPropagation();
            var targetId = e.target.id;
            if(targetId == "modal-wrap2"){
                $("#modal-wrap2").css("display","none");
                $("#wrap2").css("display","none");
            }
        });

        //确定删除选中项
        $('#btn-confirm').on('touchend',function(e){
            e.stopPropagation();
            $('.option:checked').each(function(){
                $(this).parent().parent().remove();
            });
            $("#modal-wrap2").css("display","none");
            $("#wrap2").css("display","none");
        });

        //取消模态框消失
        $('#btn-cancel').on('touchend',function(e){
            e.stopPropagation();
            $("#modal-wrap2").css("display","none");
            $("#wrap2").css("display","none");
        });

        //添加新地址
        $('#add-address').on('touchend',function(e){
            e.preventDefault();  //阻止误触a标签
            location.href = 'pay-addressadd.html';
        })
    });

</script>